<h2>Profil Editor</h2>
<form action="?c=person&amp;a=edit" method="post" class="form-horizontal">
<fieldset>

<?php

if (isset($this->profile))
{
    $multiple = $this->multiple;
    //var_dump($multiple);
    $stringMultiple=(string)$multiple;
    //var_dump($this->profile);
    //echo ("<div><input type=\"hidden\" class=\"input-xlarge\" name=\"multiple\" id=\"multiple\" value=\"$stringMultiple\"/></div>");
    $counter = 0;
    foreach ($this->allowedPrefixes as $prefix)
    {
        $elementX = "";
        //HACK: Do we have LINQ or at least something to make this better?
        foreach ($this->profile as $key => $element)
        {
            if ($element["p"] == $prefix)
            {
                $elementX = $element["o"];
            }
        }
        $counterText = (string)$counter;
        $prefixText = $counterText ."_prefix";
        $valueText = $counterText . "_value";
        echo ("<div class=\"control-group\">
        <label class=\"control-label\" for=\"$prefix\">$prefix</label>
        <div class=\"controls\">
        <input type=\"text\" class=\"input-xlarge\" name=\"$valueText\" id=\"$valueText\" value=\"$elementX\"/>
        <input type=\"hidden\" class=\"input-xlarge\" name=\"$prefixText\" id=\"$prefixText\" value=\"$prefix\"/>
        </div>
        </div>");
        $counter = $counter + 1;
    }
}
else
{
    echo ("Damn, profile not set...");
}

?>

<div class="form-actions">
    <button class="btn btn-primary" type="submit">Save</button>
</div>

</fieldset>


</form>
